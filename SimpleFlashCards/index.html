<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

<style type="text/css">
<!--
a:link            { color: #6699CC; }
a:visited         { color: #6699CC; }
a:hover           { color: #6699CC; }
a:active          { color: #6699CC; }

#section_info     { font-size:16pt; }
#collection_name  { font-size:20pt; }
#collection_count { font-size:14pt; }
div.class_entry	  { margin:15px; }

div.entry_text1   { color: #666666; font-size:24pt; }
div.entry_text2   { color: #6666FF; font-size:24pt; }

-->
</style>

<script type="text/javascript" src="data.js"></script>

<script type="text/javascript">
<!--//

function $(e){return document.getElementById(e);}

/*
FlashCards class

** add description here

*/
function FlashCards()
{
	// variables
	var m_entries = null;
	var m_entries_cnt = 0;
	var m_remaining_entries_cnt = 0;
	var m_strExitFunction;
	var m_intCurIndex;

	this.setExitFunction = function(str){
		m_strExitFunction = str
	}
	
	this.setRegion = function(region){
		var strwrk = "";
		strwrk += "<div id='section_info' align='right'></div><br>";
		strwrk += "<div id='section_cards'></div><br>";
		
		region.innerHTML = strwrk;
	}
	
	this.setEntries = function(entries){
		m_entries = entries;
		m_entries_cnt = entries.length;
		m_remaining_entries_cnt = entries.length;
	}
	
	var updateCount = function()
	{
		$("section_info").innerHTML = m_remaining_entries_cnt + "/" + m_entries_cnt + " entrie(s) left<br><a href='javascript:" + m_strExitFunction + "'>Go back to Start Page</a>";
	}
	
	this.startFlashCard = function()
	{
		_log("startFlashCard()");
		
		var parentElm = $("section_cards");
		
		for (var i = 0; i < m_entries.length; i++){
			var elm = document.createElement("div");
			elm.id = "entry_" + i;
			elm.className = "class_entry";

			var elmIndex = document.createElement("div");
			elmIndex.id = elm.id + "_index";
			elmIndex.innerHTML = i;
			elmIndex.style.display = "none";

			var elmText1 = document.createElement("div");
			elmText1.className = "entry_text1";
			elmText1.id = "text1_" + i;
			elmText1.innerHTML = m_entries[i].split("\t")[0];
			elmText1.style.display = "block";
			elmText1.entryIndex = i;
			
			elmText1.onclick = function ()
			{
				if ($("text2_" + this.entryIndex).style.display == "none"){
					$("text2_" + this.entryIndex).style.display = "block";
				}else{
					$("text2_" + this.entryIndex).style.display = "none";
				}
			}

			var elmText2 = document.createElement("div");
			elmText2.className = "entry_text2";
			elmText2.id = "text2_" + i;
			elmText2.innerHTML = m_entries[i].split("\t")[1];
			elmText2.style.display = "none";
			elmText2.entryIndex = i;

			elmText2.onclick = function ()
			{
				$("entry_" + this.entryIndex).style.display = "none";
				m_remaining_entries_cnt--;
				updateCount();
			}

			elm.appendChild(elmIndex);
			elm.appendChild(elmText1);
			elm.appendChild(elmText2);
			
			parentElm.appendChild(elm);
		}
		
		updateCount();
	}
}


var flashCards;     // the flash card data
var DEBUG = false;  // Debug flag

//----------------------------------------------------------------------------------------------------------------------
// printLog
//----------------------------------------------------------------------------------------------------------------------
function _log(str_log)
{
	if (DEBUG == false)
		return;
	
	var strwrk = $('debugOutputArea').innerHTML + str_log + "<br/>";
	$('debugOutputArea').innerHTML = strwrk;
}

//----------------------------------------------------------------------------------------------------------------------
// init
//----------------------------------------------------------------------------------------------------------------------
function init()
{
	// WRT specific: hide the softkeys
	if (navigator.userAgent.indexOf("Series60/5.0") != -1){
		window.menu.hideSoftkeys();
	}

	// initialize the start page
	var strwrk = "";
	for (var i = 0; i < FlashCardCollectionNames.length; i++){
		strwrk = strwrk + "<span id='collection_name'><a href='javascript:startFlashCards(" + i + ");'>" + FlashCardCollectionNames[i] + "</a></span><br>";
		strwrk = strwrk + "<span id='collection_count'>" +  FlashCardCollection[i].length + " entries</span><br><br>";
	}
	$("section_startpage").innerHTML = strwrk;
}


//----------------------------------------------------------------------------------------------------------------------
// Start the flashcards
//----------------------------------------------------------------------------------------------------------------------
function startFlashCards(index)
{
	flashCards = new FlashCards();
	flashCards.setEntries(FlashCardCollection[index]);
	flashCards.setExitFunction("gotoStartPage();");
	flashCards.setRegion($("section_flashcards"));
	flashCards.startFlashCard();
	
	$("section_startpage").style.display = "none";
	$("section_flashcards").style.display = "block";
}

//----------------------------------------------------------------------------------------------------------------------
// gotoStartPage
//----------------------------------------------------------------------------------------------------------------------
function gotoStartPage()
{
	flashCards = null;
	$("section_startpage").style.display = "block";
	$("section_flashcards").style.display = "none";
}

//--> 
</script>

<title>SimpleFlashCard</title>
</head>

<body onload="init()">
<div id="section_startpage"></div>  <!-- Main Menu -->
<div id="section_flashcards"></div> <!-- Flashcard -->
<div id="debugOutputArea"></div>    <!-- debug area -->
</body>

</html>
